@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Association concept'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
define view entity ZMT_XX_VOV_ASSO as select from ZMT_XX_BASIC_BP(p_type: '01') as cust 
association[1..1] to snwd_ad as _Addr on
$projection.AddressGuid = _Addr.node_key 
association[1..1] to ZMT_XX_CDS_AGG as _Sales on
$projection.NodeKey = _Sales.CustomerGuid
{
    key cust.NodeKey,
    cust.BpRole,
    cust.EmailAddress,
    cust.WebAddress,
    cust.AddressGuid,
    cust.BpId,
    cust.CompanyName,
    --ad-hoc association ==> works exactly like inner join
    --addr.country
    --exposed association ==> association alias name, not apply join upfront
    _Addr,
    _Sales
}



@AbapCatalog.viewEnhancementCategory: [#NONE]
@AccessControl.authorizationCheck: #NOT_REQUIRED
@EndUserText.label: 'Customer wise Sales'
@Metadata.ignorePropagatedAnnotations: true
@ObjectModel.usageType:{
    serviceQuality: #X,
    sizeCategory: #S,
    dataClass: #MIXED
}
@OData.publish: true
define view entity ZMT_XX_CUSTOMER_SALES as select from ZMT_XX_VOV_ASSO {
    key NodeKey,
    CompanyName,
    _Addr.country,
    _Addr.city,
    BpId,
    BpRole,
    _Sales 
}